## Сущность **auth_user** – модель пользователя в системе аутентификации

| Поле              | Тип                                       | Ограничения                 | Назначение / описание                                                                                                                                                            |
| ----------------- | ----------------------------------------- | --------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **id**            | `SERIAL` (автоинкрементный целочисленный) | `PRIMARY KEY`               | Уникальный идентификатор пользователя, используется в качестве внешнего ключа в остальных таблицах (посты, подписки, профили и т.д.).                                            |
| **email**         | `VARCHAR(255)`                            | `UNIQUE`, `NOT NULL`        | Основной логин пользователя. Хранит адрес электронной почты, по которому происходит регистрация, отправка подтверждений и восстановление пароля.                                 |
| **password_hash** | `VARCHAR(255)`                            | `NOT NULL`                  | Хеш пароля, полученный с помощью алгоритма bcrypt/argon2 (не хранит открытый пароль). При входе сравнивается хеш введённого пароля с этим значением.                             |
| **is_active**     | `BOOLEAN`                                 | `DEFAULT TRUE`              | Флаг, указывающий, активен ли аккаунт. При деактивации (например, после длительного простоя или по запросу пользователя) значение меняется на `FALSE`, и система блокирует вход. |
| **date_joined**   | `TIMESTAMP WITH TIME ZONE`                | `DEFAULT CURRENT_TIMESTAMP` | Время создания записи – момент регистрации пользователя. Используется для аналитики (возраст аккаунта) и для сортировки (например, новые пользователи в админ‑панели).           |

### Дополнительные детали

- **Индексы**:

  - `UNIQUE(email)` обеспечивает быстрый поиск пользователя по логину и предотвращает дублирование.
  - По умолчанию PostgreSQL создаёт индекс на `PRIMARY KEY (id)`.

- **Связи**:

  - Другие таблицы (например, `profile`, `post`, `follow`) содержат внешний ключ `user_id` → `auth_user.id`.
  - При удалении пользователя (`ON DELETE CASCADE` в связанных таблицах) обычно сохраняется история действий, поэтому в большинстве случаев запись **не удаляется**, а лишь помечается `is_active = FALSE`.

- **Безопасность**:
  - Поле `password_hash` никогда не возвращается в API‑ответах.
  - При изменении пароля хеш пересчитывается и перезаписывается.
  - Доступ к таблице ограничен ролями базы данных: только сервис‑аккаунт приложения имеет `INSERT/UPDATE/SELECT` права; прямой доступ разработчиков запрещён.

Эта модель покрывает базовые требования аутентификации MVP‑социальной сети и служит фундаментом для дальнейшего расширения (например, добавление 2FA, OAuth‑провайдеров и т.п.).
